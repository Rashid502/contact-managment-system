{"ast":null,"code":"import _defineProperty from\"D:\\\\Rashid_Work\\\\API Projects\\\\contact-manager-api\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"D:\\\\Rashid_Work\\\\API Projects\\\\contact-manager-api\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"D:\\\\Rashid_Work\\\\API Projects\\\\contact-manager-api\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useContext,useEffect}from\"react\";import AlertContext from\"../../context/alerts/alertContext\";import AuthContext from\"../../context/auth/authContext\";function Register(props){var alertContext=useContext(AlertContext);var authContext=useContext(AuthContext);var register=authContext.register,loadUser=authContext.loadUser,clearErrors=authContext.clearErrors,token=authContext.token,isAuthenticated=authContext.isAuthenticated,error=authContext.error;var setAlert=alertContext.setAlert;useEffect(function(){if(isAuthenticated){props.history.push(\"/\");}//User with this email already exist.\nif(error===\"User with this email already exist.\"){setAlert(\"User with this email already exist.\",\"danger\");clearErrors();}//eslint-disable-next-line\n},[error,isAuthenticated]);var _useState=useState({name:\"\",email:\"\",password:\"\",password2:\"\"}),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var name=user.name,email=user.email,password=user.password,password2=user.password2;var onChange=function onChange(e){return setUser(_objectSpread(_objectSpread({},user),{},_defineProperty({},e.target.name,e.target.value)));};var onSubmit=function onSubmit(e){e.preventDefault();if(name===\"\"||email===\"\"||password===\"\"||password2===\"\"){setAlert(\"Please enter all fields.\",\"danger\");}else if(password!==password2){setAlert(\"Password does not match.\",\"danger\");}else{register({name:name,email:email,password:password});console.log(\"token: \"+token);}};return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h1\",null,\"Account \",/*#__PURE__*/React.createElement(\"span\",{class:\"text-primary\"},\"Register\")),/*#__PURE__*/React.createElement(\"form\",{onSubmit:onSubmit},/*#__PURE__*/React.createElement(\"div\",{class:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"name\",name:\"name\"},\"Name\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",name:\"name\",value:name,onChange:onChange,required:true})),/*#__PURE__*/React.createElement(\"div\",{class:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"email\",name:\"email\"},\"Email\"),/*#__PURE__*/React.createElement(\"input\",{type:\"email\",name:\"email\",value:email,onChange:onChange,required:true})),/*#__PURE__*/React.createElement(\"div\",{class:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"password\",name:\"password\"},\"Password\"),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",name:\"password\",value:password,onChange:onChange,required:true})),/*#__PURE__*/React.createElement(\"div\",{class:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"password2\",name:\"password2\"},\"Confirm Password\"),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",name:\"password2\",value:password2,onChange:onChange,required:true})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"input\",{type:\"submit\",value:\"Register\",class:\"btn btn-primary btn-block\"}))));}export default Register;","map":{"version":3,"sources":["D:/Rashid_Work/API Projects/contact-manager-api/client/src/components/auth/Register.js"],"names":["React","useState","useContext","useEffect","AlertContext","AuthContext","Register","props","alertContext","authContext","register","loadUser","clearErrors","token","isAuthenticated","error","setAlert","history","push","name","email","password","password2","user","setUser","onChange","e","target","value","onSubmit","preventDefault","console","log"],"mappings":"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","sourcesContent":["import React, {useState, useContext, useEffect} from \"react\";\r\nimport AlertContext from \"../../context/alerts/alertContext\";\r\nimport AuthContext from \"../../context/auth/authContext\";\r\n\r\nfunction Register(props) {\r\n  const alertContext = useContext(AlertContext);\r\n  const authContext = useContext(AuthContext);\r\n\r\n  const {\r\n    register,\r\n    loadUser,\r\n    clearErrors,\r\n    token,\r\n    isAuthenticated,\r\n    error,\r\n  } = authContext;\r\n\r\n  const {setAlert} = alertContext;\r\n\r\n  useEffect(() => {\r\n    if (isAuthenticated) {\r\n      props.history.push(\"/\");\r\n    }\r\n    //User with this email already exist.\r\n    if (error === \"User with this email already exist.\") {\r\n      setAlert(\"User with this email already exist.\", \"danger\");\r\n      clearErrors();\r\n    }\r\n    //eslint-disable-next-line\r\n  }, [error, isAuthenticated]);\r\n\r\n  const [user, setUser] = useState({\r\n    name: \"\",\r\n    email: \"\",\r\n    password: \"\",\r\n    password2: \"\",\r\n  });\r\n\r\n  const {name, email, password, password2} = user;\r\n\r\n  const onChange = (e) => setUser({...user, [e.target.name]: e.target.value});\r\n\r\n  const onSubmit = (e) => {\r\n    e.preventDefault();\r\n    if (name === \"\" || email === \"\" || password === \"\" || password2 === \"\") {\r\n      setAlert(\"Please enter all fields.\", \"danger\");\r\n    } else if (password !== password2) {\r\n      setAlert(\"Password does not match.\", \"danger\");\r\n    } else {\r\n      register({name, email, password});\r\n      console.log(\"token: \" + token);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h1>\r\n        Account <span class=\"text-primary\">Register</span>\r\n      </h1>\r\n      <form onSubmit={onSubmit}>\r\n        <div class=\"form-group\">\r\n          <label htmlFor=\"name\" name=\"name\">\r\n            Name\r\n          </label>\r\n          <input\r\n            type=\"text\"\r\n            name=\"name\"\r\n            value={name}\r\n            onChange={onChange}\r\n            required\r\n          />\r\n        </div>\r\n        <div class=\"form-group\">\r\n          <label htmlFor=\"email\" name=\"email\">\r\n            Email\r\n          </label>\r\n          <input\r\n            type=\"email\"\r\n            name=\"email\"\r\n            value={email}\r\n            onChange={onChange}\r\n            required\r\n          />\r\n        </div>\r\n        <div class=\"form-group\">\r\n          <label htmlFor=\"password\" name=\"password\">\r\n            Password\r\n          </label>\r\n          <input\r\n            type=\"password\"\r\n            name=\"password\"\r\n            value={password}\r\n            onChange={onChange}\r\n            required\r\n          />\r\n        </div>\r\n        <div class=\"form-group\">\r\n          <label htmlFor=\"password2\" name=\"password2\">\r\n            Confirm Password\r\n          </label>\r\n          <input\r\n            type=\"password\"\r\n            name=\"password2\"\r\n            value={password2}\r\n            onChange={onChange}\r\n            required\r\n          />\r\n        </div>\r\n        <div>\r\n          <input\r\n            type=\"submit\"\r\n            value=\"Register\"\r\n            class=\"btn btn-primary btn-block\"\r\n          ></input>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Register;\r\n"]},"metadata":{},"sourceType":"module"}